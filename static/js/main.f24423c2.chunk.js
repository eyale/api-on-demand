(this["webpackJsonpapi-on-demand"]=this["webpackJsonpapi-on-demand"]||[]).push([[0],{221:function(e,t,r){},229:function(e,t,r){e.exports=r.p+"static/media/Logo.e0fef14e.svg"},258:function(e,t,r){e.exports=r(445)},266:function(e,t,r){},439:function(e,t,r){},441:function(e,t,r){},445:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(40),c=r(34),l=r(223),s=(r(265),r(24)),i=r(85);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=a.a.createContext({isDark:!1,toggleTheme:function(){}}),d=function(e){var t=e.children,r=function(){var e=Object(n.useState)({isDark:!1,hasThemeLoaded:!1}),t=Object(i.a)(e,2),r=t[0],a=t[1];return Object(n.useEffect)((function(){var e="true"===localStorage.getItem("isDark");e&&document.querySelector("body").classList.add("dark"),a(p({},r,{isDark:e,hasThemeLoaded:!0}))}),[]),{themeState:r,setThemeState:a}}(),o=r.themeState,c=r.setThemeState;if(!o.hasThemeLoaded)return a.a.createElement("div",null);return a.a.createElement(m.Provider,{value:{isDark:o.isDark,toggleTheme:function(){var e=!o.isDark;localStorage.setItem("isDark",JSON.stringify(e));var t=document.querySelector("body");e?t.classList.add("dark"):t.classList.remove("dark"),c(p({},o,{isDark:e}))}}},t)},E=(r(266),r(30)),f=r(224),g=r(225),b=r(157),h=r(226),v=r.n(h),O=r(227),y=r.n(O),w=r(228),S=r.n(w),_={START:"__START",SUCCESS:"__SUCCESS",ERROR:"__ERROR",CLEAR:"__CLEAR"},P={SIGNUP_GET_TOKEN:"SIGNUP_GET_TOKEN",SIGNUP_CLEAR_USER_INFO:"SIGNUP_CLEAR_USER_INFO",SIGNUP_CLEAR_USER_ERROR:"SIGNUP_CLEAR_USER_ERROR"};function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U={loading:!1,loaded:!1,error:null,token:null,password:"",decodedToken:{}};var k=Object(E.c)({signUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case P.SIGNUP_CLEAR_USER_INFO:return U;case P.SIGNUP_CLEAR_USER_ERROR:return R({},e,{error:U.error});case"".concat(P.SIGNUP_GET_TOKEN).concat(_.START):return R({},e,{password:t.payload.password,loading:!0});case"".concat(P.SIGNUP_GET_TOKEN).concat(_.SUCCESS):return R({},e,{loading:U.loading,token:t.payload,error:U.error,loaded:!0,decodedToken:S()(t.payload.access_token)});case"".concat(P.SIGNUP_GET_TOKEN).concat(_.ERROR):return R({},e,{loading:U.loading,error:t.payload});default:return e}}}),N=function(e,t){return"SIGNUP_CLEAR_USER_INFO"===t.type?k(void 0,t):k(e,t)},T=(Object(g.createLogger)({collapsed:function(e){return!e.error}}),{timeout:0,key:"persist",storage:y.a,stateReconciler:v.a}),C=[f.a];var I=Object(b.a)(T,N),D=Object(E.d)(E.a.apply(void 0,C)),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(E.e)(I,e,D),r=Object(b.b)(t);return{store:t,persistor:r}},L=r(42),x=r(51),A=r(229),B=r.n(A),K=r(76),q=r(460),F=r(44),z=r.n(F),V=r(73),J=r(120),W=r.n(J),M="http://api-on-demand-api-dev.azurewebsites.net",$=r(53),H=(r(455),r(457),$.object().shape({username:$.string().label("Username").email("Incorrect Username").required(),password:$.string().label("Password").required("Please Enter your password")})),Q=$.object().shape({username:$.string().label("Username").email("Incorrect Username").required(),password:$.string().label("Password").required("Please Enter your password"),repeatPassword:$.string().label("Repeat Password").required("Please Repeat your password")}),X=function(e){return"object"===typeof e?Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&"):null},Y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return"POST"===e?W()({method:e,url:"".concat(M,"/").concat(t),data:r,paramsSerializer:X,headers:n}):W()({method:e,url:"".concat(M,"/").concat(t),params:r,paramsSerializer:X})},Z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Y("POST",e,t,r).then((function(e){return e.data}))},ee={"Content-Type":"application/x-www-form-urlencoded"},te={grant_type:"password",scope:"api-on-demand-api",client_id:"api-on-demand-api",client_secret:"api-on-demand-secret"},re="email@mail.com",ne="***********",ae="***********",oe={username:"",password:"",repeatPassword:""},ce="email@mail.com",le="***********",se={username:"",password:""},ie="VIEW_SERVER_ERROR",ue=function(e){return function(t){return t({type:ie,payload:e})}};function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var me=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{},te);return function(){var e=Object(V.a)(z.a.mark((function e(r){var n,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"".concat(P.SIGNUP_GET_TOKEN).concat(_.START),payload:t}),e.prev=1,(n=new URLSearchParams).append("grant_type",t.grant_type),n.append("client_id",t.client_id),n.append("client_secret",t.client_secret),n.append("scope",t.scope),n.append("username",t.username),n.append("password",t.password),e.next=11,Z("connect/token",n,ee);case 11:a=e.sent,r({type:"".concat(P.SIGNUP_GET_TOKEN).concat(_.SUCCESS),payload:a}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.info("err: ",e.t0),e.t0.response&&500===e.t0.response.status?ue(e.t0.response):r({type:"".concat(P.SIGNUP_GET_TOKEN).concat(_.ERROR),payload:e.t0.response});case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()},de=function(e){var t=e.clearUserInfo,r=e.signUp,n=r.decodedToken.email;return r.token?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"header-user"},a.a.createElement("div",{className:"header-user__title"},a.a.createElement(K.a,{name:"bell outline",color:"blue"}),a.a.createElement("span",null,a.a.createElement(K.a,{name:"user",color:"blue"}),a.a.createElement(q.a,{text:n},a.a.createElement(q.a.Menu,null,a.a.createElement(q.a.Item,{text:"New"}),a.a.createElement(q.a.Divider,null),a.a.createElement(q.a.Item,{text:"logout",onClick:function(e){e.preventDefault(),t()}}))))))):null};de.defaulProps={signUp:{token:null,decodedToken:{}}};var Ee={getToken:me,clearUserInfo:function(){return function(e){e({type:P.SIGNUP_CLEAR_USER_INFO})}}},fe=Object(c.b)((function(e){return{signUp:e.signUp}}),Ee)(de),ge=(r(439),function(){var e=function(){var e=Object(n.useContext)(m);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}(),t=e.isDark,r=e.toggleTheme;return a.a.createElement("div",{className:"switch"},a.a.createElement("input",{type:"checkbox",id:"switch",checked:t,onChange:r,"aria-label":"Switch between Dark and Light mode"}),a.a.createElement("label",{htmlFor:"switch"},a.a.createElement("span",{role:"img","aria-label":"aria-labelledby"},"\ud83c\udf19"),a.a.createElement("span",{role:"img","aria-label":"aria-labelledby"},"\u2600\ufe0f")))}),be=function(){return a.a.createElement("header",{className:"header"},a.a.createElement("div",{className:"header-info"},a.a.createElement("div",{className:"header-info__name"},a.a.createElement(L.b,{to:"/"},a.a.createElement("div",{className:"logo"},a.a.createElement("img",{src:B.a,alt:"logo"})),a.a.createElement("span",null,"on demand"))),a.a.createElement("div",{className:"header-info__account"},a.a.createElement(ge,null),a.a.createElement(fe,null))))},he=(r(441),function(){return a.a.createElement("div",{className:"container"},a.a.createElement("p",null,"ups"," ",a.a.createElement("span",{role:"img","aria-label":"tricky"},"\ud83e\udd2a"),"there is no page at this route",a.a.createElement("span",{role:"img","aria-label":"omg"}," ","\ud83d\ude40")))}),ve=r(461),Oe=r(464),ye=function(e){var t=e.children;return a.a.createElement("div",{className:"container"},a.a.createElement(Oe.a,null,a.a.createElement(Oe.a.Row,{centered:!0},a.a.createElement(Oe.a.Column,{largeScreen:6,mobile:16},t))))},we={getToken:me},Se=Object(c.b)((function(e){return{signUp:e.signUp}}),we)((function(){return a.a.createElement(ye,null,a.a.createElement(ve.a,null,a.a.createElement("p",null,a.a.createElement(L.b,{to:{pathname:"/login"}},"Login")," ","or"," ",a.a.createElement(L.b,{to:{pathname:"/signup"}},"Sign up"))))})),_e=r(458),Pe=r(463),je=r(118),Re=r(462),Ue=r(456),ke=function(e){var t=e.active;return a.a.createElement(Re.a,{active:t,inverted:!0},a.a.createElement(Ue.a,null))},Ne=(r(221),function(e){var t=e.onSubmit,r=e.loading,n=e.serverErrors,o=function(e){return t&&t(e)},c=n&&n.data.error_description;return a.a.createElement(je.a,{initialValues:se,validationSchema:H},(function(e){var t=function(e){var t=e.values;return![0===t.username.length,t.password.length<1].every((function(e){return!e}))}(e),n=e.values,l=e.handleChange,s=e.handleBlur,i=e.errors,u=e.touched;return a.a.createElement("div",{className:"login-form"},a.a.createElement(_e.a,{onSubmit:function(){return o(n)},error:!!i},a.a.createElement(ke,{active:r}),a.a.createElement(_e.a.Input,{fluid:!0,label:"Username",placeholder:ce,onChange:l,onBlur:s,value:n.name,name:"username",type:"email",error:u.username&&e.errors.username}),a.a.createElement(_e.a.Input,{fluid:!0,label:"Password",placeholder:le,onChange:l,onBlur:s,value:n.name,name:"password",type:"password",error:u.password&&i.password}),a.a.createElement(ve.a,{error:!0,content:c}),a.a.createElement("div",{className:"btn-container btn-container__center"},a.a.createElement(Pe.a,{size:"big",type:"submit",loading:r,disabled:t,content:"Login"}))))}))});Ne.defaultProps={handleChange:function(){return null},handleBlur:function(){return null},values:{username:"",password:""},touched:{username:""},errors:{username:""},serverErrors:null};var Te=Ne,Ce={getToken:me},Ie=Object(x.f)(Object(c.b)((function(e){return{signUp:e.signUp}}),Ce)((function(e){var t=e.signUp,r=e.getToken,n=e.history,o=function(){var e=Object(V.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:n.push("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=t.error,l=t.loading;return a.a.createElement(ye,null,a.a.createElement(Te,{onSubmit:o,loading:l,serverErrors:c}))}))),De=function(e){var t=e.onSubmit,r=e.loading,o=e.serverErrors,c=Object(n.useState)(!0),l=Object(i.a)(c,2),s=l[0],u=l[1],p=Object(n.useState)(!0),m=Object(i.a)(p,2),d=m[0],E=m[1],f=function(){return u(!s)},g=function(){return E(!d)},b=s?"eye":"eye slash",h=d?"eye":"eye slash",v=s?"password":"input",O=d?"password":"input",y=function(e){return t&&t(e)},w=o&&o.data.error_description;return a.a.createElement(je.a,{initialValues:oe,validationSchema:Q},(function(e){var t=function(e){var t=e.values;return![0===t.username.length,t.password.length<1,t.repeatPassword.length<1].every((function(e){return!e}))}(e),n=e.values,o=e.handleChange,c=e.handleBlur,l=e.errors,s=e.touched;return a.a.createElement("div",{className:"login-form"},a.a.createElement(_e.a,{error:!!l},a.a.createElement(ke,{active:r}),a.a.createElement(_e.a.Input,{fluid:!0,label:"Username",placeholder:re,onChange:o,onBlur:c,value:n.name,name:"username",type:"email",error:s.username&&e.errors.username}),a.a.createElement(_e.a.Input,{fluid:!0,label:"Password",placeholder:ne,onChange:o,onBlur:c,value:n.name,name:"password",type:v,error:s.password&&l.password,action:{icon:b,onClick:f}}),a.a.createElement(_e.a.Input,{fluid:!0,label:"Repeat password",placeholder:ae,onChange:o,onBlur:c,value:n.name,name:"repeatPassword",type:O,error:s.password&&l.password,action:{icon:h,onClick:g}}),a.a.createElement(ve.a,{error:!0,content:w}),a.a.createElement("div",{className:"btn-container btn-container__center"},a.a.createElement(Pe.a,{size:"big",type:"submit",loading:r,disabled:t,content:"Sign up",onClick:function(){return y(n)}}))))}))};De.defaultProps={handleChange:function(){return null},handleBlur:function(){return null},values:{username:"",password:""},touched:{username:""},errors:{username:""},serverErrors:null};var Ge=De,Le={getToken:me},xe=Object(x.f)(Object(c.b)((function(e){return{signUp:e.signUp}}),Le)((function(e){var t=e.signUp,r=e.getToken,n=e.history,o=function(){var e=Object(V.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:n.push("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=t.error,l=t.loading;return a.a.createElement(ye,null,a.a.createElement(Ge,{onSubmit:o,loading:l,serverErrors:c}))}))),Ae=function(){return a.a.createElement(L.a,{basename:"/"},a.a.createElement(be,null),a.a.createElement("main",{className:"main"},a.a.createElement(x.c,null,a.a.createElement(x.a,{path:"/",exact:!0,component:Se}),a.a.createElement(x.a,{path:"/login",exact:!0,component:Ie}),a.a.createElement(x.a,{path:"/signup",exact:!0,component:xe}),a.a.createElement(x.a,{component:he}))))},Be=G(),Ke=Be.store,qe=Be.persistor,Fe=function(){return a.a.createElement(d,null,a.a.createElement("div",{className:"wrapper"},a.a.createElement(Ae,null)))},ze=function(){return a.a.createElement(c.a,{store:Ke},a.a.createElement(l.a,{loading:a.a.createElement(ke,{active:!0}),persistor:qe},a.a.createElement(Fe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.render)(a.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[258,1,2]]]);
//# sourceMappingURL=main.f24423c2.chunk.js.map